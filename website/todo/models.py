"""
ToDoItem Model
==============

This module defines the data model for the todo application using Django's ORM.

Django MVC Pattern - The "M" (Model)
------------------------------------
In Django's interpretation of MVC:
  - **Model**: Defines data structure and business logic (this file)
  - **View**: Handles HTTP requests and returns responses (views.py)
  - **Template**: Renders HTML using context data (templates/*.html)

Note: Django calls controllers "views" and templates "templates", which can
be confusing if you're coming from traditional MVC frameworks.

Django ORM Features Used
------------------------
1. **models.Model**: Base class that provides:
   - Database table creation
   - CRUD operations (objects.create(), .save(), .delete())
   - QuerySet API (objects.all(), .filter(), .get())

2. **Field Types**:
   - CharField: Variable-length string with max_length
   - DateTimeField: Date and time (Python datetime object)
   - BooleanField: True/False value

3. **Field Options**:
   - max_length: Maximum character count for CharField
   - auto_now_add: Automatically set to current datetime on creation
   - default: Default value when not provided

4. **Manager (objects)**:
   - Default manager for database queries
   - Provides QuerySet methods like .all(), .filter(), .order_by()

Database Schema
---------------
This model creates a table with the following columns:
  - id (INTEGER PRIMARY KEY): Auto-generated by Django
  - text (VARCHAR(255)): The task description
  - created_on (DATETIME): When the item was created
  - completed (BOOLEAN): Whether the task is done

Example Usage
-------------
    # Create a new item
    item = ToDoItem.objects.create(text="Buy groceries", completed=False)

    # Query all items
    all_items = ToDoItem.objects.all()

    # Filter items
    incomplete = ToDoItem.objects.filter(completed=False)

    # Get single item by primary key
    item = ToDoItem.objects.get(pk=1)

    # Update an item
    item.text = "Buy organic groceries"
    item.save()

    # Delete an item
    item.delete()
"""

from django.db import models


class ToDoItem(models.Model):
    """
    A simple to-do item with text, creation timestamp, and completion flag.

    Attributes:
        text (str): The description of the task (max 255 characters)
        created_on (datetime): When the item was created (auto-set)
        completed (bool): Whether the task is complete (default: False)

    Methods:
        __str__(): Returns the text for display in admin and templates
    """

    text = models.CharField(max_length=255)
    created_on = models.DateTimeField(auto_now_add=True)
    completed = models.BooleanField(default=False)

    # Explicit manager annotation to satisfy static checkers (e.g., Pylint, mypy)
    objects = models.Manager()

    def __str__(self) -> str:
        """
        Return the text representation of the to-do item.

        This method is called by:
          - Django admin list display
          - Template rendering with {{ item }}
          - print() and logging functions
        """
        return str(self.text)

    class Meta:
        """
        Model metadata options.

        ordering: Default sort order for queries without explicit order_by()
        verbose_name: Singular name for admin interface
        verbose_name_plural: Plural name for admin interface
        """

        ordering = ["-created_on"]
        verbose_name = "To-Do Item"
        verbose_name_plural = "To-Do Items"
